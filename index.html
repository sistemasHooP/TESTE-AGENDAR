<!DOCTYPE html>
<html>
<head>
    <title>A Carregar Agendamento...</title>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0B2447"/>
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Agendar">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #F3F4F6; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; color: #4B5563; }
        .loader-container { text-align: center; }
        .loader { border: 4px solid #E5E7EB; border-radius: 50%; border-top: 4px solid #0B2447; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 16px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="loader-container">
        <div class="loader"></div>
        <p>A carregar aplicação...</p>
    </div>

    <script>
        // URL da sua API do Apps Script de TESTES
        const API_URL = "https://script.google.com/macros/s/AKfycbx3HNQ1FZ32RTV7Nj915u-G-i5GSA96_aouKe7pCB_cIMwaNd3ncnz0-EARj34poxYORQ/exec";

        // Esta função busca o HTML da API e substitui a página inteira.
        async function loadAppInterface() {
            try {
                // --- ALTERAÇÃO IMPORTANTE (CACHE BUSTING) ---
                // Adicionamos um parâmetro de tempo à URL para torná-la única a cada carregamento.
                // Isso força o navegador a ignorar qualquer cache antigo.
                const response = await fetch(`${API_URL}?v=${new Date().getTime()}`);
                
                if (!response.ok) {
                    throw new Error('Não foi possível carregar a aplicação. Código: ' + response.status);
                }
                const htmlContent = await response.text();
                // Substitui todo o conteúdo da página pelo HTML recebido da API.
                document.documentElement.innerHTML = htmlContent;
            } catch (error) {
                document.body.innerHTML = `<p style="color: red; text-align: center;">Erro ao carregar a aplicação: ${error.message}</p>`;
            }
        }

        // Inicia o carregamento assim que a página abre.
        loadAppInterface();
    </script>
</body>
</html>
